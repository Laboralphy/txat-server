var O2 = require('o2');

/**
 * Classe de recyclage des identifiants 
 */
var Recycler = O2.createClass({
	aIds: null,
	nLastId: 0,
	
	__construct: function() {
		this.reset();
	},
	
	/**
	 * Remet le systeme à zero
	 */
	reset: function() {
		this.aIds = [];
		this.nLastId = 0;
	},
	
	/**
	 * Renvoie un nouvel id
	 * @return int
	 */
	getId: function() {
		if (this.aIds.length) {
			return this.aIds.shift();
		} else {
			return ++this.nLastId;
		}
	},
	
	/**
	 * Jette un id
	 * @param int id identifiant à jeter
	 */
	disposeId: function(id) {
		this.aIds.push(id);
	}
});

module.exports = Recycler;
