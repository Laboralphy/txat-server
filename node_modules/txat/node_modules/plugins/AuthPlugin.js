var O2 = require('o2');
var Mediator = require('mediator');

var AuthPlugin = O2.extendClass(Mediator.Plugin, {
	
	aSuperAdmin: null,
	
	getName: function() {
		return 'Auth';
	},
	
	init: function() {
		this.register('config');
		this.register('userJoined');
	},
	
	config: function(oConfig) {
		var c = oConfig[this.getName()];
		this.aSuperAdmin = c.superadmin;
	},
	
	userJoined: function(oChannel, oUser) {
		if (this.aSuperAdmin.indexOf(oUser.sName) >= 0) {
			oUser.oPowers[oChannel.id].preset(3);
		}
	}
});

module.exports = AuthPlugin;
