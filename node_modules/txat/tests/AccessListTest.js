var AccessList = require('../AccessList.js');

test('basic', function(assert) {
	var l = new AccessList();
	assert.ok(l, 'Access List ok');
	assert.deepEqual(l.oList, {}, 'list is ready');
});

test('manage users', function(assert) {
	var l = new AccessList();
	l.addUser('foo');
	l.addUser('bar', 1000);
	assert.deepEqual(l.oList, {foo:0, bar:1000}, 'two user added');
	l.removeUser('foo');
	assert.deepEqual(l.oList, {bar:1000}, 'foo removed');
	l.removeUser('toto');
	assert.deepEqual(l.oList, {bar:1000}, 'try to remove toto but no one found : no error though');
	l.removeUser('bar');
	assert.deepEqual(l.oList, {}, 'bar removed : list is empty');
});

test('manage users', function(assert) {
	var l = new AccessList();
	var t = Date.now() + 24 * 3600 * 1000;
	l.addUser('alwaysWelcome');
	l.addUser('tooOld', 1000);
	l.addUser('still3days', t);
	assert.ok(l.isUserListed('alwaysWelcome'), 'always welcome');
	assert.ok(!l.isUserListed('tooOld'), 'too old');
	assert.ok(l.isUserListed('still3days'), 'still 3 days');
	
});
